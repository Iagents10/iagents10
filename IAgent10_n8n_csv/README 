# IAgent10 - Consulta Inteligente de Notas Fiscais via n8n e LLM

Este projeto implementa um agente inteligente para consulta de dados de notas fiscais a partir de arquivos CSV, orquestrado via **n8n** e integrado a modelos de linguagem (LLM) como o GPT-4o. O fluxo automatiza desde a ingestÃ£o dos dados atÃ© a interpretaÃ§Ã£o de perguntas em linguagem natural, tudo com suporte a interfaces modernas como **Streamlit** e conteinerizaÃ§Ã£o via **Docker**.

## ğŸŒ RepositÃ³rio

Este projeto estÃ¡ contido na pasta:

```
https://github.com/Iagents10/iagents10/IAgent10_n8n_csv
```

## ğŸ”§ Tecnologias Utilizadas

- [n8n](https://n8n.io/) para orquestraÃ§Ã£o do fluxo
- [LangChain](https://www.langchain.com/) com modelo OpenAI (GPT-4o-mini)
- [Supabase](https://supabase.com/) para banco de dados
- [Google Drive API](https://developers.google.com/drive) para ingestÃ£o dos arquivos
- [Streamlit](https://streamlit.io/) para interface web
- [Docker](https://www.docker.com/) para conteinerizaÃ§Ã£o do ambiente

---

## ğŸ“ Estrutura do Projeto

```
IAgent10_n8n_csv/
â”œâ”€â”€ README.md
â”œâ”€â”€ workflow/
â”‚   â””â”€â”€ desafio_2_copy.json   # Fluxo n8n completo exportado
â”œâ”€â”€ streamlit_app/
â”‚   â”œâ”€â”€ app.py                # Interface web para perguntas
â”‚   â””â”€â”€ requirements.txt      # DependÃªncias do Streamlit
â”œâ”€â”€ docker-compose.yml       # OrquestraÃ§Ã£o do ambiente
â””â”€â”€ .env                     # VariÃ¡veis de ambiente (chaves e configs)
```

---

## â–¶ï¸ Como Executar

### 1. Clone o RepositÃ³rio

```bash
git clone https://github.com/Iagents10/iagents10.git
cd iagents10/IAgent10_n8n_csv
```

### 2. Configure o Arquivo `.env`

Crie um arquivo `.env` com as seguintes variÃ¡veis:

```env
OPENAI_API_KEY=your_openai_key
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_key
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=postgres
```

### 3. Execute com Docker Compose

```bash
docker-compose up --build
```

Isso iniciarÃ¡:
- O n8n na porta `5678`
- A interface Streamlit na porta `8501`

Acesse via:
```
http://localhost:8501
```

---

## ğŸ’¬ UtilizaÃ§Ã£o via Interface

- FaÃ§a uma pergunta como:
  - "Qual o fornecedor com maior montante recebido?"
  - "Qual item teve maior volume entregue?"
- O agente usa a LLM para interpretar, consulta os dados no Supabase/PostgreSQL e retorna a resposta na interface.

---

## ğŸ“¦ ImportaÃ§Ã£o do Fluxo n8n

1. Acesse `http://localhost:5678`
2. Importe o arquivo `workflow/desafio_2_copy.json`
3. Configure as credenciais (Google Drive, Supabase, OpenAI)
4. Execute o fluxo

---

## ğŸš€ PossÃ­veis Melhorias Futuras

- Cache local de respostas
- GeraÃ§Ã£o automÃ¡tica de dashboards com Streamlit
- HistÃ³rico de perguntas
- Upload manual de arquivos CSV pela interface

---

## ğŸ“„ LicenÃ§a

MIT License Â© [Alexsandro Nepunuceno](https://github.com/alexsandrocn)
